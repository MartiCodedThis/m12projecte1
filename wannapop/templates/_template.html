<!DOCTYPE html>
<html lang="ca">

<head>
   <meta charset="utf-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <title>{% block title %}{% endblock %} - Wannapop</title>
   <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-slate-200 text-slate-800 font-sans">
   <nav class="bg-white p-5">
      <div class="container mx-auto flex space-x-2 justify-between items-center">
         <h1 class="font-black text-5xl underline decoration-emerald-500">Wannapop</h1>
         <div class="flex space-x-2">
            {% if current_user.is_authenticated %}
               <a class="block text-center py-2 px-4 my-1" href="/profile">{{ current_user.name }}</a>
               {% if current_user.role == "admin" or current_user.role == "moderator" %}
                  <!-- Display this link only if the user is an admin -->
                  <a class="block bg-slate-200 hover:bg-emerald-500 text-slate-800 hover:text-white font-semibold w-48 py-2 px-4 my-1 text-center rounded-md shadow-md active:bg-emerald-800 outline-none active:ring-2 active:ring-emerald-500" href="/admin">Zona admin</a>
               {% endif %}
               <a class="block bg-red-200 hover:bg-red-500 text-red-800 hover:text-white font-semibold w-48 py-2 px-4 my-1 text-center rounded-md shadow-md active:bg-red-800 outline-none active:ring-2 active:ring-red-500" href="/logout">Tancar sessió</a>
            {% else %}
               <a class="block bg-slate-200 hover:bg-emerald-500 text-slate-800 hover:text-white font-semibold text-xs lg:text-base lg:w-48 py-2 px-4 my-1 text-center rounded-md shadow-md active:bg-emerald-800 outline-none active:ring-2 active:ring-emerald-500" href="/login">Obrir sessió</a>
               <a class="block bg-slate-200 hover:bg-emerald-500 text-slate-800 hover:text-white font-semibold text-xs lg:text-base lg:w-48 py-2 px-4 my-1 text-center rounded-md shadow-md active:bg-emerald-800 outline-none active:ring-2 active:ring-emerald-500" href="/register">Crear compte</a>
            {% endif %}
         </div>
      </div>
   </nav>  
   
   <div class="container mx-auto p-10">
   {% with messages = get_flashed_messages(with_categories=true) %}
   {% if messages %}
      {% for category, message in messages %}
      <div class="p-4 mb-4 rounded-lg shadow-md
         {% if category == 'success' %}
            bg-emerald-500 text-white
         {% elif category == 'error' %}
            bg-red-500 text-white
         {% elif category == 'info' %}
            bg-white
         {% elif category == 'warning' %}
            bg-yellow-500 text-white
         {% endif %}
      ">
         <p>{{ message }}</p>
      </div>
      {% endfor %}
   {% endif %}
   {% endwith %}
   <div class="bg-white p-4 rounded-lg shadow-md">
   <!-- START CONTENT -->
   {% block content %} {% endblock %}
   <!-- END CONTENT -->
   </div>

   </div>
</body>

</html>